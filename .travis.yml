language: objective-c
osx_image: xcode10
env:
  global:
  - FRAMEWORK_NAME=aws-sdk-ios
xcode_workspace: AWSiOSSDKv2.xcworkspace
xcode_scheme: AWSiOSSDKv2
before_install:
- brew update
- brew outdated carthage || brew upgrade carthage
- pod repo update

script: bash Scripts/Package.sh

deploy:
- provider: script
  script: python3 cocoapods_release.py
  on:
  repo: sunchunqiang/aws-sdk-ios
  tags: true    
addons:
  apt:
    sources:
      - deadsnakes  
    packages:
      - python3.5
